# Парсер арифметических выражений, поддерживающий вычисления в разных типах

## Построение арифметических выражений

Парсер разбирает корректные выражения, состощие из чисел, переменных и следующих операций над ними:

  1. Бинарные: `+, -, *, /, >>, >>>, <<, min, max, ** (pow), // (log)`
  1. Унарные: `-, l0 (leading zeroes), t0 (trailing zeroes), abs (absolute value), count (bit count)`
  
Все операции объединены одним общим интерфейсом -- CommonExp, вычисляемые от трех переменных -- TripleExpression.

Реализованы следующие операторы:

  1. `evaluate(int x, int y, int z)` -- вычисления значения выражения в точке (x, y, z)
  1. `toString()` -- возвращает строковое представление выражения (каждая операция оборачивается в скобки)
  1. `toMiniString()` -- убирает лишние скобки и возвращает минимальное (по количеству скобок) строковое представление выражения

Можно составлять выражения из классов из модуля `operations`, например:

```
CommonExp expression =
        new Add(
                new Subtract(
                        new Variable("x"),
                        new Const(32)
                ),
                new L_Zeroes(
                        new Variable("y")
                )
        );
System.out.println(expression);                             // ((x - 32) + l0(y))
System.out.println(expression.toMiniString());              // x - 32 + l0 y
System.out.println(expression.evaluate(10, -10, 43));       // -22
```

## Безопасные операции, вычисления в разных типах

Добавлены безопасные операции (`Checked*`) -- операции, проверяющие на возможные арифметические ошибки выражение перед подстановкой переменных. При попытке произвести запрещенное вычисление, бросается ExpressionException. 

Класс `Const` хранит числовое значение типа `T extends Number`, а также вместо переменных можно подставлять числа типа `T`, таким образом, теперь вычисления можно производить в разных типах.

## Executors

Поскольку интерфейс класса `Number` не позволяет совершать над числами требуемые операции, реализованы `TExecutor`, где T - название типа -- вычислитель в этом типе. Исполнитель представляет общий интерфейс работы с числами. 

Уже реализованы вычисления в следующих типах:
* Integer
* Long
* Double
* BigInteger
* Truncated Integer (в числах, кратных 10)

## Парсер 

Реализован парсер арифметических выражений `ExpressionParser` методом рекурсивного спуска. Любая строка, состоящая из символов латинского алфавита, интерпретируется как название переменной. 

Единственная функция `parse` принимает два аргумента: Executor<T> и выражения в виде строки. Результатом будет TripleExpression в типе T.

Над полученным выражением можно совершать операции, описанные в пункте 1.

_примечание_: гарантируется, что `parse` от строки `expression.toString()` вернет выражение, эквивалентное исходному (т.е. совпадающее во всех точках вида (T x, T y, T z)) 

Пример использования:

```
System.out.println(
        new ExpressionParser<Long>().parse(new LongExecutor(), "((x - 32) + (y * z))")
                .evaluate(10L, -10L, 43L)
);
```
